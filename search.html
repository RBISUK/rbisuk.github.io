<!doctype html><meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>Search â€¢ RBIS</title>
<link rel="stylesheet  " href="/assets/rbis.css">
  <h1>Search</h1>
  <ul id="results"></ul>
</main>
<script>
const q = new URLSearchParams(location.search).get('q')||'';
const inp = document.getElementById('q'); const ul = document.getElementById('results');
inp.value = q;
async function getUrls(){
  const txt = await fetch('/sitemap.xml',{cache:'no-store'}).then(r=>r.text());
  return Array.from(txt.matchAll(/<loc>(.*?)<\/loc>/g)).map(m=>m[1]);
}
function render(urls, q){
  ul.innerHTML = '';
  if(!q) return;
    .forEach(({u})=>{
      const li=document.createElement('li'); li.innerHTML=`<a href="${u}">${u}</a>`; ul.appendChild(li);
    });
}
let urls=[]; getUrls().then(us=>{urls=us; render(urls,inp.value)});
inp.addEventListener('input', ()=>render(urls, inp.value));
</script>
