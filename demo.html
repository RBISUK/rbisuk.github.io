<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8"/>
<meta name="viewport"
<link rel="stylesheet" href="assets/theme.css?v=1"> content="width=device-width,initial-scale=1"/>
<title>RBIS — Interactive Demo</title>
<meta name="description" content="RBIS Interactive Demo: intake → timers → evidence timeline → export.">
<style>
:root{
  --bg:#0b0c10;--panel:#12141d;--ink:#f2f3fa;--muted:#a4abbd;--line:#202433;
  --brand:#8b5cf6;--brand2:#22d3ee;--ok:#22c55e;--warn:#f59e0b;--bad:#ef4444;
}
*{box-sizing:border-box} body{margin:0;font-family:Inter,system-ui,sans-serif;background:var(--bg);color:var(--ink);line-height:1.6}
a{color:inherit;text-decoration:none}
.disclosure{background:#0f1220;padding:.6rem 1rem;font-size:.9rem;border-bottom:1px solid #1a2031}
header{background:#12141d;position:sticky;top:0;z-index:100}
header nav{display:flex;gap:.6rem;justify-content:center;padding:.8rem;flex-wrap:wrap}
header nav a{padding:.45rem .9rem;border:1px solid #1a2031;border-radius:999px}
header nav a.active,header nav a:hover{background:linear-gradient(135deg,var(--brand),var(--brand2));color:#000;font-weight:600}
#hero{text-align:center;padding:3.5rem 1rem}
.spinny{font-size:3rem;font-weight:900;animation:spin 8s linear infinite;display:inline-block}
@keyframes spin{to{transform:rotate(360deg)}}
h1{margin:.5rem 0;font-size:2.2rem}
.sub{color:var(--muted);max-width:760px;margin:0 auto}
.section{padding:2rem 1rem;max-width:1100px;margin:0 auto;border-top:1px solid #1a2031}
.grid{display:grid;grid-template-columns:repeat(auto-fit,minmax(280px,1fr));gap:1.2rem}
.card{background:var(--panel);padding:1.2rem;border-radius:14px;border:1px solid #1f2333}
.card h3{margin-top:0}
label{display:block;font-weight:600;margin:.4rem 0 .25rem}
input,select,textarea,button{font-family:inherit;font-size:1rem}
input,select,textarea{width:100%;padding:.65rem;border-radius:10px;border:1px solid #2a2f44;background:#0f111b;color:#fff}
textarea{min-height:84px;resize:vertical}
button{padding:.65rem 1rem;border-radius:10px;border:1px solid #2a2f44;background:linear-gradient(135deg,var(--brand),var(--brand2));color:#000;font-weight:700;cursor:pointer}
button.ghost{background:#0f111b;color:#e6e6ff}
.row{display:flex;gap:.6rem;flex-wrap:wrap}
.row>*{flex:1 1 220px}
.kpis{display:grid;grid-template-columns:repeat(auto-fit,minmax(200px,1fr));gap:.8rem;margin-top:.8rem}
.kpi{background:#0f111b;border:1px solid #1d2132;border-radius:10px;padding:.7rem;text-align:center}
.kpi b{display:block;font-size:1.2rem}
.timeline{display:grid;grid-template-columns:1fr;gap:.7rem;margin-top:1rem}
.ev{background:#0f111b;border:1px solid #1d2132;border-radius:12px;padding:.8rem}
.ev .meta{color:#aab3c8;font-size:.9rem}
.badge{display:inline-block;padding:.2rem .5rem;border-radius:999px;font-size:.78rem;font-weight:700}
.badge.ok{background:rgba(34,197,94,.16);color:#86efac;border:1px solid rgba(34,197,94,.35)}
.badge.warn{background:rgba(245,158,11,.16);color:#fde68a;border:1px solid rgba(245,158,11,.35)}
.badge.bad{background:rgba(239,68,68,.16);color:#fecaca;border:1px solid rgba(239,68,68,.35)}
footer{background:#0d111d;border-top:1px solid #1a2031;padding:1.2rem;text-align:center;color:#aaa;margin-top:3rem;font-size:.9rem}
.sep{height:1px;background:#1a2031;margin:1.2rem 0}
.small{color:#aab3c8;font-size:.92rem}
</style>
</head>
<body>

<div class="disclosure"><strong>Disclosure:</strong> RBIS is not a law firm and does not provide legal advice. We analyse only the evidence in front of our intelligence officers, objectively and without bias.</div>

<header>
  <nav>
    <a href="index.html">Home</a>
    <a href="about.html">About</a>
    <a href="reports.html">Reports</a>
    <a class="active" href="demo.html">Demo</a>
    <a href="dashboard.html">Dashboard</a>
    <a href="managed.html">Managed Support</a>
    <a href="careers.html">Careers</a>
    <a href="legal.html">Legal</a>
  </nav>
</header>

<section id="hero">
  <div class="spinny">R</div>
  <h1>Interactive Demo</h1>
  <p class="sub">Run an intake, start SLA timers, build an audit timeline, and export an evidence bundle — all in your browser.</p>
</section>

<section class="section">
  <div class="grid">
    <!-- Intake -->
    <div class="card">
      <h3>Repairs Intake</h3>
      <div class="row">
        <div>
          <label>Tenant Name</label>
          <input id="tenant" placeholder="e.g., Alex Chen">
        </div>
        <div>
          <label>Address</label>
          <input id="address" placeholder="e.g., Flat 12, Block D, SE10">
        </div>
      </div>
      <div class="row">
        <div>
          <label>Repair Type</label>
          <select id="rtype">
            <option value="Damp & Mould">Damp & Mould</option>
            <option value="Heating / Boiler">Heating / Boiler</option>
            <option value="Leak / Moisture Ingress">Leak / Moisture Ingress</option>
            <option value="Electrical">Electrical</option>
            <option value="Fire Safety">Fire Safety</option>
          </select>
        </div>
        <div>
          <label>Severity</label>
          <select id="severity">
            <option value="Low">Low</option>
            <option value="Medium" selected>Medium</option>
            <option value="High">High</option>
            <option value="Emergency">Emergency</option>
          </select>
        </div>
      </div>
      <label>Description</label>
      <textarea id="desc" placeholder="Short, factual notes."></textarea>
      <div class="row">
        <button onclick="generateReceipt()">Generate Receipt</button>
        <button class="ghost" onclick="resetAll()">Reset</button>
      </div>
      <div class="kpis">
        <div class="kpi"><span class="small">Receipt</span><b id="receipt">–</b></div>
        <div class="kpi"><span class="small">SLA Target</span><b id="slaLabel">—</b></div>
        <div class="kpi"><span class="small">SLA Countdown</span><b id="slaClock">--:--:--</b></div>
      </div>
    </div>

    <!-- Evidence timeline / export -->
    <div class="card">
      <h3>Evidence Timeline</h3>
      <div class="small">We only record what we can evidence — timestamps, actors, and the artefact.</div>
      <div class="sep"></div>
      <div class="row">
        <div>
          <label>Event</label>
          <input id="evTitle" placeholder="e.g., Acknowledgement sent">
        </div>
        <div>
          <label>Actor</label>
          <input id="evActor" placeholder="e.g., Repairs Team / Contractor A">
        </div>
      </div>
      <label>Details</label>
      <textarea id="evNotes" placeholder="What exactly happened?"></textarea>
      <div class="row">
        <button onclick="addEvent()">Add Event</button>
        <button onclick="exportCSV()" class="ghost">Export CSV</button>
      </div>
      <div id="timeline" class="timeline"></div>
    </div>
  </div>
</section>

<section class="section">
  <div class="card">
    <h3>What this demo proves</h3>
    <p>1) Intake creates a receipt and starts the SLA clock. 2) Each action becomes an immutable event with time, actor, and notes. 3) Export produces an audit-ready CSV you can hand to the board — or a regulator.</p>
    <p class="small">Tip: try <em>Emergency</em> severity and see how the SLA tightens. Add events like <em>Contractor attended</em> or <em>Temporary fix</em> to watch your chronology build itself.</p>
  </div>
</section>

<footer>
  Designed &amp; built by Ryan Roberts | RBIS
</footer>

<script>
/* --- State --- */
let state={
  receipt:null,
  slaMs:null,
  deadline:null,
  timer:null,
  events:[]
};

function nowISO(){return new Date().toISOString().replace('T',' ').slice(0,19)}

/* --- Receipt & SLA --- */
function slaHoursFor(severity){
  switch(severity){
    case 'Emergency': return 4;      // 4 hours
    case 'High': return 24;          // 1 day
    case 'Medium': return 72;        // 3 days
    default: return 120;             // 5 days
  }
}
function generateReceipt(){
  const tenant=document.getElementById('tenant').value.trim()||'Tenant';
  const address=document.getElementById('address').value.trim()||'Address';
  const rtype=document.getElementById('rtype').value;
  const severity=document.getElementById('severity').value;
  const desc=document.getElementById('desc').value.trim()||'-';

  // make a short, readable ID
  const id='R-'+Math.random().toString(36).slice(2,7).toUpperCase();
  const created=nowISO();
  state.receipt=id;

  // SLA
  const hrs=slaHoursFor(severity);
  const ms=hrs*60*60*1000;
  state.slaMs=ms;
  state.deadline=new Date(Date.now()+ms);

  // KPIs
  document.getElementById('receipt').innerText=id;
  document.getElementById('slaLabel').innerText=`${hrs}h (${severity})`;

  // Seed timeline with intake + ack
  state.events=[{
    t:created, who:'System', what:'Intake created', notes:`Type=${rtype}; Severity=${severity}; Desc=${desc}; Tenant=${tenant}; Address=${address}`
  },{
    t:created, who:'System', what:'Receipt issued', notes:`${id}`
  }];

  renderTimeline();
  startClock();
}

/* --- SLA Countdown --- */
function startClock(){
  clearInterval(state.timer);
  state.timer=setInterval(()=>{
    if(!state.deadline){return}
    const remaining=state.deadline - Date.now();
    const clock=document.getElementById('slaClock');
    if(remaining<=0){
      clock.innerText='00:00:00';
      clock.className='';
      clock.classList.add('badge','bad');
      clearInterval(state.timer);
      return;
    }
    const h=Math.floor(remaining/3.6e6);
    const m=Math.floor((remaining%3.6e6)/6e4);
    const s=Math.floor((remaining%6e4)/1e3);
    clock.className='';
    const ratio=remaining/state.slaMs;
    if(ratio>0.5){clock.classList.add('badge','ok')}
    else if(ratio>0.2){clock.classList.add('badge','warn')}
    else{clock.classList.add('badge','bad')}
    clock.innerText=[h,m,s].map(n=>String(n).padStart(2,'0')).join(':');
  },250);
}

/* --- Timeline --- */
function addEvent(){
  if(!state.receipt){
    alert('Generate a receipt first.');
    return;
  }
  const title=(document.getElementById('evTitle').value||'Event').trim();
  const who=(document.getElementById('evActor').value||'Unattributed').trim();
  const notes=(document.getElementById('evNotes').value||'').trim();
  state.events.push({t:nowISO(),who,what:title,notes});
  document.getElementById('evTitle').value='';
  document.getElementById('evActor').value='';
  document.getElementById('evNotes').value='';
  renderTimeline();
}

function renderTimeline(){
  const box=document.getElementById('timeline');
  box.innerHTML='';
  state.events.forEach((e,i)=>{
    const badgeCls = i===0 ? 'ok' : 'warn';
    box.innerHTML+=`
      <div class="ev">
        <div class="meta"><span class="badge ${badgeCls}">${i===0?'seed':'event'}</span> • ${e.t} • ${e.who}</div>
        <div style="margin-top:.3rem;font-weight:700">${e.what}</div>
        ${e.notes?`<div class="small" style="margin-top:.25rem">${e.notes}</div>`:''}
      </div>`;
  });
}

/* --- Export --- */
function exportCSV(){
  if(!state.events.length){alert('No events to export.');return}
  const rows=[['Receipt','Timestamp','Actor','Event','Notes']];
  state.events.forEach(e=>rows.push([state.receipt||'',e.t,e.who,e.what,(e.notes||'').replace(/\n/g,' ')]));
  const csv=rows.map(r=>r.map(x=>`"${String(x).replace(/"/g,'""')}"`).join(',')).join('\n');
  const blob=new Blob([csv],{type:'text/csv'});
  const a=document.createElement('a');
  a.href=URL.createObjectURL(blob);
  a.download=`rbis-evidence-${state.receipt||'demo'}.csv`;
  a.click();
  setTimeout(()=>URL.revokeObjectURL(a.href),300);
}

/* --- Reset --- */
function resetAll(){
  clearInterval(state.timer);
  state={receipt:null,slaMs:null,deadline:null,timer:null,events:[]};
  document.getElementById('receipt').innerText='–';
  document.getElementById('slaLabel').innerText='—';
  const clock=document.getElementById('slaClock'); clock.className=''; clock.innerText='--:--:--';
  document.getElementById('tenant').value='';
  document.getElementById('address').value='';
  document.getElementById('desc').value='';
  document.getElementById('rtype').selectedIndex=0;
  document.getElementById('severity').value='Medium';
  document.getElementById('timeline').innerHTML='';
}
</script>

</body>
</html>
